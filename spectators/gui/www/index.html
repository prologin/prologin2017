<!doctype html>
<html>
<head>
    <title>WebGL experiment</title>
    <style>
        body {
            background: #aaa;
            overflow: hidden;
            margin: 0;
            padding: 0;
        }

        #container {
            width: 700px;
            height: 500px;
            position: relative;
            margin: 0 auto;
        }

        #info {
            position: absolute;
            width: 100%;
            bottom: 10px;
            text-align: center;
            z-index: 100;
            display: block;
            color: white;
        }

        .player {
            position: absolute;
            width: 50%;
            bottom: 0;
            padding: .5em 0;
            color: #efefef;
            font-family: sans-serif;
            text-align: center;
        }

        .player:first-child {
            left: 0;
        }

        .player:last-child {
            left: 50%;
        }

        .winner .name {
            font-size: 1.5em;
            padding: .5em 0;
        }

        .gold .icon, .catalyst .icon {
            display: inline-block;
            width: 24px;
            height: 24px;
            margin-right: .5em;
            background-size: contain;
            vertical-align: middle;
        }

        .gold .icon {
            background-image: url(img/gold.png);
        }

        .catalyst .icon {
            background-image: url(img/catalyst.png);
        }
    </style>
    <script id="vertexShader2" type="x-shader/x-vertex">
varying vec3 vNormal;
void main()
{
    vNormal = normalize( normalMatrix * normal );
    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}


    </script>
    <script id="fragmentShader2" type="x-shader/x-vertex">
uniform float c;
uniform float p;
varying vec3 vNormal;
void main()
{
	float intensity = pow( c - dot( vNormal, vec3( 0.0, 0.0, 1.0 ) ), p );
	gl_FragColor = vec4( 1.0, 1.0, 1.0, 1.0 ) * intensity;
}


    </script>


    <script id="fragmentShader" type="x-shader/x-fragment">
			uniform float time;
			uniform float offset;
			uniform vec2 resolution;
			uniform float fogDensity;
			uniform vec3 fogColor;
			uniform sampler2D texture1;
			uniform sampler2D texture2;
			varying vec2 vUv;
			void main( void ) {
			  if (fogDensity > 1.) {
			   gl_FragColor = texture2D( texture2, vUv );
			   return;
       }
				vec2 position = -1.0 + 2.0 * vUv;
				vec4 noise = texture2D( texture1, vUv );
				vec2 T1 = vUv + vec2( 1.5, -1.5 ) * (time + offset) * 0.02;
				vec2 T2 = vUv + vec2( -0.5, 2.0 ) * (time + offset) * 0.01;
				T1.x += noise.x * 2.0;
				T1.y += noise.y * 2.0;
				T2.x -= noise.y * 0.2;
				T2.y += noise.z * 0.2;
				float p = texture2D( texture1, T1 * 2.0 ).a;
				vec4 color = texture2D( texture2, T2 * 2.0 );
				vec4 temp = color * ( vec4( p, p, p, p ) * 2.0 ) + ( color * color - 0.1 );
				if( temp.r > 1.0 ){ temp.bg += clamp( temp.r - 2.0, 0.0, 100.0 ); }
				if( temp.g > 1.0 ){ temp.rb += temp.g - 1.0; }
				if( temp.b > 1.0 ){ temp.rg += temp.b - 1.0; }
				gl_FragColor = temp;
				float depth = 10.;
				const float LOG2 = 1.442695;
				float fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );
				fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );
				gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
			}


    </script>

    <script id="vertexShader" type="x-shader/x-vertex">
			uniform vec2 uvScale;
			varying vec2 vUv;
			void main()
			{
				vUv = uvScale * uv;
				vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );
				gl_Position = projectionMatrix * mvPosition;
			}


    </script>

</head>
<body>

<div id="container">
    <div id="players">
    </div>
</div>

<script src="js/lib/jquery.min.js"></script>
<script src="js/lib/three.min.js"></script>
<script src="js/lib/stats.min.js"></script>
<script src="js/lib/shaders/ConvolutionShader.js"></script>
<script src="js/lib/shaders/CopyShader.js"></script>
<script src="js/lib/shaders/FilmShader.js"></script>
<script src="js/lib/postprocessing/EffectComposer.js"></script>
<script src="js/lib/postprocessing/BloomPass.js"></script>
<script src="js/lib/postprocessing/UnrealBloomPass.js"></script>
<script src="js/lib/postprocessing/FilmPass.js"></script>
<script src="js/lib/postprocessing/RenderPass.js"></script>
<script src="js/lib/postprocessing/MaskPass.js"></script>
<script src="js/lib/postprocessing/ShaderPass.js"></script>
<script src="js/lib/OrbitControls.js"></script>
<script src="js/lib/Tween.js"></script>
<script src="js/main.js"></script>
</body>
</html>
